<div class="main">
  <div class="topbar">
    <nav>
      <div class="name">DSIGS —— Device Scheduling Instructions Generator And Simulator</div>
    </nav>
  </div>

  <div class="tab">
    <ul id="tablabel">
      <li id="requirements" (click)="change_Menu('requirements')">ServiceRequirements</li>
      <li id="devicerequirements" (click)="change_Menu('devicerequirements')">DeviceRequirements</li>
      <li id="problemdiagram" (click)="change_Menu('problemdiagram')">ProblemDiagram</li>
      <li id="systembehaviours" (click)="change_Menu('systembehaviours')">SystemBehaviours</li>
      <li id="scenario" (click)="change_Menu('scenario')">ScenarioDiagram</li>
      <li id="instructions" (click)="change_Menu('instructions')">Instructions</li>
      <li id="simulation" (click)="change_Menu('simulation')">Simulation</li>
    </ul>
  </div>

  <div id="requirementsPanel" class="pure-g">
    <div class="pure-u-1-5">
      <b id="template_introduction" class="introduction_not_margin_left">Templates And Examples:</b>
      <div id="templates">
        <ul>
          <li style="text-align : center"><b>Templates</b></li>
          <li><b>'ALWAYS' Requirements：</b></li>
          <li>state <b class="highlight">SHOULD ALWAYS BE ACTIVE</b></li>
          <li>attribute <b class="highlight">SHOULD ALWAYS BE ABOVE/BELOW</b> value</li>
          <li></li>
          <li><b>'NEVER' Requirements：</b></li>
          <li>event <b class="highlight">SHOULD NEVER HAPPEN</b></li>
          <li>attribute <b class="highlight">SHOULD NEVER BE ABOVE/BELOW</b> value</li>
          <li>[state1,state2,...] <b class="highlight">SHOULD NEVER OCCUR TOGETHER</b></li>
          <li></li>
          <li><b>'PREFERRED' Requirements：</b></li>
          <li><b class="highlight">PREFERRED</b> attribute <b class="highlight">IS</b> value</li>
          <li></li>
          <li><b>'IF-THEN' Requirements：</b></li>
          <li><b class="highlight">IF</b> trigger <b class="highlight">(FOR TIME)</b> <b class="highlight">THEN</b>
            event
          </li>
          <li><b class="highlight">IF</b> trigger <b class="highlight">(FOR TIME)</b> <b class="highlight">THEN</b>
            state
          </li>
          <li><b class="highlight">IF</b> trigger <b class="highlight">(FOR TIME)</b> <b class="highlight">THEN</b>
            effect
          </li>
          <li></li>
          <li style="text-align : center"><b>Examples</b></li>
          <li>Ac.coldOn <b class="highlight">SHOULD ALWAYS BE ACTIVE</b></li>
          <li>Air.temperature <b class="highlight">SHOULD ALWAYS BE ABOVE</b> 0</li>
          <li>Ac.turnoncold <b class="highlight">SHOULD NEVER HAPPEN</b></li>
          <li>Air.temperature <b class="highlight">SHOULD NEVER BE BELOW</b> 0</li>
          <li>[Ac.coldOn,Window.wopen,...] <b class="highlight">SHOULD NEVER OCCUR TOGETHER</b></li>
          <li><b class="highlight">PREFERRED</b> Air.temperature <b class="highlight">IS</b> 25</li>
          <li><b class="highlight">IF</b> Air.temperature>30 <b class="highlight">(FOR 10m)</b> <b
              class="highlight">THEN</b> Ac.turnoncold</li>
          <li><b class="highlight">IF</b> Air.temperature>30 <b class="highlight">(FOR 10m)</b> <b
              class="highlight">THEN</b> Ac.coldOn</li>
          <li><b class="highlight">IF</b> Air.humidity>30 <b class="highlight">(FOR 10m)</b> <b
              class="highlight">THEN</b>
            allow ventilating the room</li>
        </ul>
      </div>
    </div>
    <div class="pure-u-2-5">
      <b id="input_introduction" class="introduction">Please Enter The Requirements:</b>
      <ngx-monaco-editor id="input_textarea" class="input" [options]="editorOptions" [(ngModel)]="requirementTexts"
        (onInit)="monacoOnInit($event)"></ngx-monaco-editor>
      <b id="complemented_introduction" class="introduction">Below Are The Requirements Complemented, Please Modify Them
        If Necessary:</b>
      <ngx-monaco-editor id="complemented_textarea" class="complemented" [options]="editorOptions"
        [(ngModel)]="complementedRequirements" (onInit)="monacoOnInit($event)"></ngx-monaco-editor>
    </div>
    <div class="pure-u-2-5">
      <b id="scenario_introduction" class="introduction">Service Requirement Scenario Diagram:</b>
      <div id="srSCDPanel">
        <a [href]="srImgURL" target="_blank">
          <img [src]="srImgURL" class="content" id="srcontent" />
        </a>
      </div>
    </div>
  </div>

  <div id="devicerequirementsPanel" class="pure-g">
    <div class="pure-u-1-2">
      <b id="devicerequirementstext_introduction" class="introduction_not_margin_left">Device Related Requirements:</b>
      <!-- <div id="devicerequirementstext">
        <ul *ngFor="let functionalRequirement of functionalRequirements">
          <li>{{functionalRequirement}}</li>
        </ul>
      </div> -->
      <ngx-monaco-editor id="device_textarea" class="input" [options]="editorOptions" [(ngModel)]="functionalRequirements"
        (onInit)="monacoOnInit($event)"></ngx-monaco-editor>
      <div class="tab">
        <ul id="tablabel">
          <li id="solvableErrorsTab" (click)="change_Error_Menu('solvable')">Solvable Errors</li>
          <li id="unsolvableErrorsTab" (click)="change_Error_Menu('unsolvable')">Unsolvable Errors</li>
        </ul>
      </div>
      <div id="solvableErrorsPanel" class="errorsPanel">
        <ul *ngFor="let error of solvableErrors">
          <li>{{error}}</li>
        </ul>
        <button id="solveButton" class="button" (click)="solve()">Solve</button>
      </div>
      <div id="unsolvableErrorsPanel" class="errorsPanel">
        <ul *ngFor="let error of unsolvableErrors">
          <li>{{error}}</li>
        </ul>
      </div>
    </div>

    <div class="pure-u-1-2">
      <b class="introduction">Device Requirement Scenario Diagram:</b>
      <div id="drSCDPanel">
        <a [href]="drImgURL" target="_blank">
          <img [src]="drImgURL" class="content" id="drcontent" />
        </a>
      </div>
    </div>
  </div>

  <div id="problemdiagramPanel" class="pure-g">
    <div class="pure-u-4-5">
      <b class="introduction_not_margin_left">Problem Diagram:</b>
      <div id="content"></div>
    </div>

    <div class="pure-u-1-5">
      <b class="introduction_not_margin_left">Information Panel:</b>
      <div class="informationPanel" id="informationPanel">
        <ul>
          <li *ngIf="!open2;else elseOpen2" (click)="setOpen2()" class="title">&nbsp;+ All Phenomena</li>
          <ng-template #elseOpen2>
            <li (click)="setOpen2()" class="title">&nbsp;- All Phenomena</li>
            <div class="content">
              <table *ngIf="open2" class="content">
                <tr>
                  <th>Name</th>
                  <th>Initiator</th>
                  <th>Receiver</th>
                  <th>Description</th>
                  <th>PheType</th>
                </tr>
                <tr *ngFor="let phenomonon of phenomena">
                  <th>phe{{phenomonon.biaohao}}</th>
                  <th>{{phenomonon.from.shortName}}</th>
                  <th>{{phenomonon.to.shortName}}</th>
                  <th>{{phenomonon.name}}</th>
                  <th>{{phenomonon.state}}</th>
                </tr>
              </table>
            </div>
          </ng-template>
          <li *ngIf="!open4;else elseOpen4" (click)="setOpen4()" class="title">&nbsp;+ Reference Phenomena</li>
          <ng-template #elseOpen4>
            <li (click)="setOpen4()" class="title">&nbsp;- Reference Phenomena</li>
            <div class="content">
              <table *ngIf="open4" class="content">
                <tr>
                  <th>Name</th>
                  <th>Req</th>
                  <th>Initiator</th>
                  <th>Receiver</th>
                  <th>Content</th>
                  <th>RefType</th>
                </tr>
                <tr *ngFor="let reference of referencePhenomena">
                  <th>phe{{reference.biaohao}}</th>
                  <th>req{{reference.requirement.biaohao}}</th>
                  <th>{{reference.from.shortName}}</th>
                  <th>{{reference.to.shortName}}</th>
                  <th>{{reference.name}}</th>
                  <th *ngIf="reference.constraining === true">constraining</th>
                  <th *ngIf="reference.constraining === false">normal</th>
                </tr>
              </table>
            </div>
          </ng-template>
          <li *ngIf="!open5;else elseOpen5" (click)="setOpen5()" class="title">&nbsp;+ PD Information</li>
          <ng-template #elseOpen5>
            <li (click)="setOpen5()" class="title">&nbsp;- PD Information</li>
            <div class="content">
              <table *ngIf="open5" class="content">Information</table>
            </div>
          </ng-template>
        </ul>
      </div>
    </div>
  </div>

  <div id="systembehavioursPanel" class="pure-g">
    <div class="pure-u-1-2">
      <b class="introduction_not_margin_left">System Behaviours:</b>
      <div id="systembehaviourstext">
        <ul *ngFor="let rule of rules">
          <li>{{rule}}</li>
        </ul>
      </div>
    </div>

    <div class="pure-u-1-2">
      <b class="introduction">System Behaviour Scenario Diagram:</b>
      <div id="sbSCDPanel">
        <a [href]="sbImgURL" target="_blank">
          <img [src]="sbImgURL" class="content" id="sbcontent" />
        </a>
      </div>
    </div>
  </div>

  <div id="instructionsPanel">
    <b class="introduction_not_margin_left">Device Scheduling Instructions:</b>
    <div class="divcontent" style="white-space:pre-wrap; height:20px" *ngFor="let instruction of instructions">
      {{instruction}} </div>
  </div>

  <button class="upload button">UploadOntology
    <input class="change" type="file" multiple="multiple" (change)="selectedFileOnChanged($event)" />
  </button>
  <button class="button" (click)="displayChooseScenarioPanel()">ChooseScenario</button>
  <button class="button" (click)="complementRequirements()">ComplementRequirements</button>
  <button class="button" (click)="displayPlaningPanel()">GenerateDeviceRequirements</button>
  <!-- <button class="button" (click)="checkErrors()">CheckErrors</button> -->
  <!-- <button class="button" (click)="generateScenarioDiagrams()">DisplayPlanning</button> -->
  <!-- <details class="detail">
    <summary>DeriveProblemDiagram</summary>
    <p (click)="problemDiagramDerivation()">PDWithoutSensors</p>
    <p (click)="problemDiagramDerivation2()">PDWithSensors</p>
  </details> -->
  <button class="button" (click)="generateSystemBehaviours()">GenerateSystemBehaviours</button>
  <!-- <button class="button" (click)="generateSrSCD()">EnsureRequirements</button> -->
  <!--   
  <details class="detail">
    <summary>CheckInconsistency</summary>
      <p (click)="ruleBasedCheck()">Rule</p>
      <p (click)="formalismBasedCheck()">Formalism</p>
  </details>  -->

  <!-- <details class="detail">
    <summary>CheckSatisfaction</summary>
    <p (click)="generateScenarioDiagrams()">ScenarioDiagrams</p>
    <p (click)="NuSMVCheck()">NuSMVCheck</p>
  </details> -->

  <details class="detail">
    <summary>GenerateDeviceInstructions</summary>
    <p (click)="generateIFTTTRules()">IFTTT</p>
    <p (click)="generateDroolsRules()">Drools</p>
    <p (click)="generateOnenetRules()">Onenet</p>
  </details>
  <button class="button" (click)="generateSimulation()">ShowSimulation</button>

  <div id="planing"> Please Choose Your Preference<br />
    <label><input checked="true" type="radio" name="planingRadio" value="Random">Random</label><br />
    <label><input type="radio" name="planingRadio" value="SaveEnergy">SaveEnergy</label><br />
    <label><input type="radio" name="planingRadio" value="BestPerformance">BestPerformance</label><br />
    <button class="button" (click)="generateFunctionalRequirements()">Confirm</button>
    <button class="button" (click)="cancel()">Cancel</button>
  </div>

  <div id="chooseScenario"> Please Choose Your Scenario<br />
    <label><input checked="true" type="radio" name="scenarioRadio"
        value="SmartConferenceRoom">SmartConferenceRoom</label><br />
    <label><input type="radio" name="scenarioRadio" value="SmartHome">SmartHome</label><br />
    <button class="button" (click)="chooseScenario()">Confirm</button>
    <button class="button" (click)="cancel()">Cancel</button>
  </div>
  <!-- <button class="button" (click)="downloadOntology()">DownloadOntology</button> -->
</div>
